syntax = "proto2";

option cc_enable_arenas = true;

package c2017.magazine;

message MagazineStatus {
  required bool has_gear = 1;
  required bool current_spiked = 2;
  required bool is_running = 3;
}

message MagazineInput {
  required double conveyor_current = 1;
  required bool has_hp_gear = 2; // senses distance
}

message MagazineOutput {
  required bool gear_intake_covered = 1;
  required bool magazine_extended = 2;
  required bool gear_shutter_open = 3;
  required double gear_rotator_voltage = 4;
  required double conveyor_voltage = 5;
  required double brush_voltage = 6;
}

enum ConveyorGoalState {
  CONVEYOR_IDLE = 0;
  CONVEYOR_FORWARD = 1;
  CONVEYOR_BACKWARD = 2;
}

enum HPIntakeGoalState {
  NONE = 0;
  BALLS = 1;
  GEAR = 2;
  BOTH = 3;
}

enum BrushGoalState {
  BRUSH_IDLE = 0;
  BRUSH_FORWARD = 1;
  BRUSH_BACKWARD = 2;
}

message MagazineGoal {
  required ConveyorGoalState conveyor_goal = 1;
  required HPIntakeGoalState hp_intake_goal = 2;
  required BrushGoalState brush_goal = 3;
  required bool score_gear = 4;
  required double gear_rotator_voltage = 5;
  required bool magazine_extended = 6;
}
