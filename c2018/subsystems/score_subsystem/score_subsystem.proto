syntax = "proto2";

option cc_enable_arenas = true;

package c2018.score_subsystem;

enum ClawMode {
  SCORE_F = 0;
  SCORE_B = 1;
  VERTICAL = 2;
}

enum IntakeMode {
  INTAKE = 0;
  OUTTAKE = 1;
  IDLE = 2;
  HOLD = 3;
}

enum SystemState {
  INITIALIZING = 0;
  CALIBRATING = 1;
  MOVING = 2;
  SYSTEM_IDLE = 3;
  ENCODER_FAULT = 4;
  DISABLED = 5;
}

enum SubSystemState {
  ELEVATOR_UP = 0;
  WRIST_UP = 1;
  RUNNING = 2;
  SUBSYSTEM_DISABLED = 3;
}

message ScoreSubsystemInput {
  required uint64 timestamp = 1;
  required double elevator_encoder = 2;
  required bool elevator_hall = 3;
  required double wrist_encoder = 4;
  required bool wrist_hall = 5;
  required double intake_current = 6;
  required bool has_cube = 7;
}

message ScoreSubsystemOutput {
  required uint64 timestamp = 1;
  required double elevator_voltage = 2;
  required double roller_voltage = 3;
  required double wrist_voltage = 4;
  required bool claw_pinch = 5;
}

message ScoreSubsystemGoal {
  required uint64 timestamp = 1;
  optional ClawMode claw_mode = 2;
  optional IntakeMode intake_mode = 3;
  optional double elevator_height = 4;
  optional double elevator_velocity = 5;
  optional double intake_voltage = 6;
  required bool god_mode = 7;
}

message ScoreSubsystemStatus {
  required uint64 timestamp = 1;
  required double elevator_actual_height = 2;
  required double estimated_velocity = 3;
  required bool elevator_at_top = 4;
  required SystemState elevator_state = 5;
  required double elevator_voltage_error = 6;
  required double elevator_uncapped_voltage = 7;
  required double elevator_profiled_goal = 8;
  required double elevator_unprofiled_goal = 9;
  required bool elevator_encoder_fault_detected = 10;
  required bool elevator_calibrated = 11;
  required double wrist_position = 12;
  required double wrist_velocity = 13;
  required bool wrist_calibrated = 14;
  required SystemState claw_state = 15;
}

